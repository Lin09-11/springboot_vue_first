# 一、基本的页面样式

```vue
<template>
    <el-container style="height: 100vh">

<!--      侧边栏
          :width：动态绑定宽度，使得侧边栏可以收缩
-->
      <el-aside :width="sideWidth+'px'" style="background-color: rgb(238, 241, 246); height:100%; box-shadow: 2px 0 6px rgb(0 21 41)" >
<!--        :collapse-transition="false":取消导航栏动画收缩
            :collapse="isCollapse":侧边栏是否折叠
-->
        <el-menu :default-openeds="['1', '3']" style="min-height: 100%; overflow: hidden"
                 background-color="rgb(48,65,86)"
                 text-color="#fff"
                 active-text-color="#ffd04b"
                 :collapse-transition="false"
                 :collapse="isCollapse"
        >
          <div style="height: 60px;line-height: 60px; text-align: center">
            <img src="../assets/logo.png" alt="" style="width: 20px; position: relative;top: 5px;margin-right: 5px">
            <b style="color:white" v-show="logoTextShow">后台管理系统</b>
          </div>
          <el-submenu index="1">
            <template slot="title">
              <i class="el-icon-location"></i>
              <span slot="title">导航一</span>
            </template>
            <el-menu-item-group>
              <template slot="title">分组一</template>
              <el-menu-item index="1-1">选项1</el-menu-item>
              <el-menu-item index="1-2">选项2</el-menu-item>
            </el-menu-item-group>
            <el-menu-item-group title="分组2">
              <el-menu-item index="1-3">选项3</el-menu-item>
            </el-menu-item-group>
            <el-submenu index="1-4">
              <template slot="title">选项4</template>
              <el-menu-item index="1-4-1">选项4-1</el-menu-item>
            </el-submenu>
          </el-submenu>
          <el-submenu index="2">
            <template slot="title">
              <i class="el-icon-menu"></i>
              <span slot="title">导航二</span>
            </template>
            <el-menu-item-group>
              <template slot="title">分组一</template>
              <el-menu-item index="2-1">选项1</el-menu-item>
              <el-menu-item index="2-2">选项2</el-menu-item>
            </el-menu-item-group>
            <el-menu-item-group title="分组2">
              <el-menu-item index="2-3">选项3</el-menu-item>
            </el-menu-item-group>
            <el-submenu index="2-4">
              <template slot="title">选项4</template>
              <el-menu-item index="2-4-1">选项4-1</el-menu-item>
            </el-submenu>
          </el-submenu>
          <el-submenu index="3">
            <template slot="title">
              <i class="el-icon-setting"></i>
              <span slot="title">导航三</span>
            </template>
            <el-menu-item-group>
              <template slot="title">分组一</template>
              <el-menu-item index="3-1">选项1</el-menu-item>
              <el-menu-item index="3-2">选项2</el-menu-item>
            </el-menu-item-group>
            <el-menu-item-group title="分组2">
              <el-menu-item index="3-3">选项3</el-menu-item>
            </el-menu-item-group>
            <el-submenu index="3-4">
              <template slot="title">选项4</template>
              <el-menu-item index="3-4-1">选项4-1</el-menu-item>
            </el-submenu>
          </el-submenu>
        </el-menu>
      </el-aside>





      <el-container>
<!--        信息头部-->
<!--        line-height:让其与高度一致，可以使得文字水平居中-->
        <el-header style="font-size: 12px; border: 1px solid #ccc; line-height: 60px; display: flex">
          <div style="flex: 1;font-size: 18px">
<!--            给span动态绑定一个“collapseBtnClass”类，收缩框
                并添加一个点击事件
-->
            <span :class="collapseBtnClass" style="cursor: pointer" @click="collapse"></span>
          </div>
          <el-dropdown  style="width: 50px;cursor: pointer">
            <span>王小虎</span><i class="el-icon-arrow-down" style="margin-left: 5px"></i>
            <el-dropdown-menu slot="dropdown">
              <el-dropdown-item>个人信息</el-dropdown-item>
              <el-dropdown-item>退出</el-dropdown-item>
            </el-dropdown-menu>
          </el-dropdown>
        </el-header>

<!--        信息主体-->
        <el-main>
<!--          搜索框-->
          <div style="padding: 10px 0">
            <el-input style="width: 200px" suffix-icon="el-icon-search"></el-input>
            <el-button style="margin-left: 5px" type="primary">搜索</el-button>
          </div>
          <el-table :data="tableData">
            <el-table-column prop="date" label="日期" width="140">
            </el-table-column>
            <el-table-column prop="name" label="姓名" width="120">
            </el-table-column>
            <el-table-column prop="address" label="地址">
            </el-table-column>
          </el-table>

<!--          下方的分页-->
          <div style="padding: 10px 0">
            <el-pagination
                :page-sizes="[5, 10, 15, 20]"
                :page-size="10"
                layout="total, sizes, prev, pager, next, jumper"
                :total="400">
            </el-pagination>
          </div>
        </el-main>
      </el-container>
    </el-container>
</template>

<script>

export default {
  name: 'HomeView',
  data(){
    const item = {
      date: '2016-05-02',
      name: '王小虎',
      address: '上海市普陀区金沙江路 1518 弄'
    };
    return {
      msg: "您好",
      tableData: Array(10).fill(item),
      collapseBtnClass: 'el-icon-s-fold',
      //侧边栏默认是展开的
      isCollapse: false,
      //默认值是200px
      sideWidth:200,
      logoTextShow:true
    };
  },
  methods:{
    collapse(){//点击收缩按钮触发
      this.isCollapse=!this.isCollapse
      if(this.isCollapse){
        this.sideWidth=64
        //修改图标
        this.collapseBtnClass='el-icon-s-unfold'
        //文字是否消失
        this.logoTextShow=false
      }else {
        this.sideWidth=200
        this.collapseBtnClass='el-icon-s-fold'
        this.logoTextShow=true
      }
    }
  }
}
</script>
```

# 二、动态sql

1.在使用update时候，是将整个用户的数据进行修改,所以我们要使用修改部分数据即可。故要使用mybatis的xml映射文件

地址：[入门_MyBatis中文网](https://mybatis.net.cn/getting-started.html)

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.mybatis.example.BlogMapper">
```

2.Usermapper.xml与UserMapper.java进行映射

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace:是要进行映射的mapper文件的地址-->
<mapper namespace="com.xiaolin.springboot.mapper.UserMapper">
<!--     id：要与映射的mapper文件中使用其方法的名字一致-->
    <update id="update">
        update sys_user
        <set>
            <if test="username !=null">
                username=#{username},
            </if>
            <if test="password !=null">
                password=#{password},
            </if>
            <if test="nickname !=null">
                nickname=#{nickname},
            </if>
            <if test="email !=null">
                email=#{email},
            </if>
            <if test="phone !=null">
                phone=#{phone},
            </if>
            <if test="address !=null">
                address=#{address}
            </if>
        </set>
    <where>
        id=#{id}
    </where>
    </update>
</mapper>

```

```java
package com.xiaolin.springboot.mapper;

import com.xiaolin.springboot.entity.User;
import org.apache.ibatis.annotations.Insert;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Select;
import org.apache.ibatis.annotations.Update;

import java.util.List;

/**
 * 用于数据库连接
 */
@Mapper
public interface UserMapper {

    /**
     * 更新用户信息
     * @param user
     */
    Integer update(User user);
}

```

# 三、将Mapper的配置信息加入到SpringBoot的配置文件中,并打印日志信息

```xml
#扫描所有的mybatis的xml文件
mybatis:
  mapper-locations: classpath:mapper/*.xml
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
```

![image-20230726204217719](D:\SpringBoot+Vue\assets\image-20230726204217719.png)

# 四、SpringBoot的增删改查

### UserController

```java
@RestController
@RequestMapping("/user")//将该文件要进行访问时候，统一地址为“user”
public class UserController {

    @Autowired//导入UserMapper的实例对象
    private UserMapper userMapper;

    @Autowired
    private UserService userService;

    @PostMapping()
    /**
     * 新增和修改
     * @RequestBody:是将用户传入的数据转换为json对象
     */
    public Integer save(@RequestBody User user){
//        return userMapper.insert(user);
        return userService.save(user);
    }


    /**
     * 查询全部信息
     * @return
     */
    @GetMapping("/")
    public List<User> index(){
        return userMapper.findAll();
    }

    /**
     * 根据传入的id删除信息
     * @PathVariable:是获取用户输入的数据
     */
    @DeleteMapping("/{id}")
    public Integer delete(@PathVariable Integer id){
        return userMapper.deleteById(id);
    }
}
```

### UserMapper

```java
/**
 * 用于数据库连接
 */
@Mapper
public interface UserMapper {
    /**
     * 查询全部用户
     * @return
     */
    @Select("select * from sys_user;")
    public List<User> findAll();

    /**
     * 实现用户的插入
     * @param user
     * @return
     */
    @Insert("insert into sys_user(username, password, nickname, email, phone, address) VALUES\n" +
            "    (#{username},#{password},#{nickname},#{email},#{phone},#{address});")
    Integer insert(User user);

    /**
     * 更新用户信息
     * @param user
     */
    Integer update(User user);

    /**
     *  @Param("id")中的”id“要与where id中的传参id形式要一致的
     * @param id
     * @return
     */
    @Delete("delete from sys_user where id=#{id}")
    Integer deleteById(@Param("id") Integer id);
}
```

### UserService

```java
@Service//将实例对象交给IOC容器
public class UserService {
    @Autowired
    private UserMapper userMapper;

    public int save(User user){
        if(user.getId()==null){//user没有id，则表示新增加
           return userMapper.insert(user);
        }else {//user有id，表示更新
            return userMapper.update(user);
        }
    }
}
```

### resources/mapper/User.xml

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace:是要进行映射的mapper文件的地址-->
<mapper namespace="com.xiaolin.springboot.mapper.UserMapper">
<!--     id：要与映射的mapper文件中使用其方法的名字一致-->
    <update id="update">
        update sys_user
        <set>
            <if test="username !=null">
                username=#{username},
            </if>
            <if test="password !=null">
                password=#{password},
            </if>
            <if test="nickname !=null">
                nickname=#{nickname},
            </if>
            <if test="email !=null">
                email=#{email},
            </if>
            <if test="phone !=null">
                phone=#{phone},
            </if>
            <if test="address !=null">
                address=#{address}
            </if>
        </set>
    <where>
        id=#{id}
    </where>
    </update>
</mapper>

```

# 五、跨域问题

![image-20230726213609866](D:\SpringBoot+Vue\assets\image-20230726213609866.png)

### 1.概念

**跨域：协议，ip，端口号这三个只要有一个不同就发生了跨域**

### 2.解决方法

```java
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.cors.CorsConfiguration;
import org.springframework.web.cors.UrlBasedCorsConfigurationSource;
import org.springframework.web.filter.CorsFilter;
 
@Configuration
public class CorsConfig {
 
    // 当前跨域请求最大有效时长。这里默认1天
    private static final long MAX_AGE = 24 * 60 * 60;
 
    @Bean
    public CorsFilter corsFilter() {
        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
        CorsConfiguration corsConfiguration = new CorsConfiguration();
        corsConfiguration.addAllowedOrigin("*"); // 1 设置访问源地址
        corsConfiguration.addAllowedHeader("*"); // 2 设置访问源请求头
        corsConfiguration.addAllowedMethod("*"); // 3 设置访问源请求方法
        corsConfiguration.setMaxAge(MAX_AGE);
        source.registerCorsConfiguration("/**", corsConfiguration); // 4 对接口配置跨域设置
        return new CorsFilter(source);
    }
}

```

# 六、SpringBoot分页查询

### 1.忽略某一个字段，不展示给前端

![image-20230726214745458](D:\SpringBoot+Vue\assets\image-20230726214745458.png)

```
@JsonIgnore
```

### 2.用户输入的模糊查询

#### UserController

```java
          public Map<String, Object> findPage(@RequestParam Integer pageNum, @RequestParam Integer pageSize,@RequestParam String username){
              pageNum=(pageNum-1)*pageSize;
              //data是渲染出来的数据
              List<User> data = userMapper.selectPage(pageNum, pageSize,username);
              //查询总条数
              Integer total = userMapper.selectTotal(username);
              //封装成一个Map对象
              Map<String,Object> res=new HashMap<>();
              res.put("data",data);
              res.put("total",total);
              return res;
          }
```

#### UserMapper

```java
    /**
     * SpringBoot实现分页查询的基本原理
     * @param pageNum
     * @param pageSize
     * @return
     */
    @Select("select * from sys_user where username like concat('%',#{username},'%') limit #{pageNum} ,#{pageSize};")
    List<User> selectPage(Integer pageNum, Integer pageSize, String username);

    /**
     * 查看总条数
     * @return
     */
    @Select("select count(*) from sys_user where username like concat('%',#{username},'%') ;")
    Integer selectTotal(String username);
```

![image-20230727233630280](D:\SpringBoot+Vue\assets\image-20230727233630280.png)

![image-20230727233646971](D:\SpringBoot+Vue\assets\image-20230727233646971.png)

![image-20230727233656760](D:\SpringBoot+Vue\assets\image-20230727233656760.png)

HomeView.vue

```vue
<!--          搜索框-->
          <div style="margin: 10px 0">
<!--            动态绑定：进行模糊查询-->
            <el-input style="width: 200px;margin-left: 5px"
                      suffix-icon="el-icon-search"
                      placeholder="请输入名称"
                      v-model="username"
            ></el-input>
            <el-input style="width: 200px;margin-left: 5px"
                      suffix-icon="el-icon-message"
                      placeholder="请输入邮箱"
            ></el-input>
            <el-input style="width: 200px;margin-left: 5px"
                      suffix-icon="el-icon-position"
                      placeholder="请输入地址"
            ></el-input>
            <el-button style="margin-left: 5px" type="primary" @click="load">搜索</el-button>
          </div>
          
<script>

export default {
  name: 'HomeView',
  data(){
    return {
      msg: "您好",
      username:'',
      tableData: [],
      collapseBtnClass: 'el-icon-s-fold',
      //侧边栏默认是展开的
      isCollapse: false,
      //默认值是200px
      sideWidth:200,
      logoTextShow:true,
      //数据的条数
      total:0,
      //当前页数
      pageNum:1,
      //一页展示的条数
      pageSize:2,
    };
  },
  created() {
    //请求分页查询数据
    this.load();
  },
  methods:{
    collapse(){//点击收缩按钮触发
      this.isCollapse=!this.isCollapse
      if(this.isCollapse){
        this.sideWidth=64
        //修改图标
        this.collapseBtnClass='el-icon-s-unfold'
        //文字是否消失
        this.logoTextShow=false
      }else {
        this.sideWidth=200
        this.collapseBtnClass='el-icon-s-fold'
        this.logoTextShow=true
      }
    },
    //进行数据的请求
    load(){
      fetch("http://localhost:9090/user/page?pageNum="+this.pageNum+"&pageSize="+this.pageSize+"&username="+this.username)
          .then(res=>res.json())
          .then(res=>{
            console.log(res)
            this.tableData=res.data
            this.total=res.total
          })
    },
    handleSizeChange(pageSize){
      console.log(pageSize);
      //将获取到用户选择的数值进行复制
      this.pageSize=pageSize
      //获取到对应的页码时要进行数据请求
      this.load()
    },
    handleCurrentChange(pageNum){
      console.log(pageNum)
      //将获取到用户选择的数值进行复制
      this.pageNum=pageNum
      //获取到对应的页码时要进行数据请求
      this.load()
    },
  }
}
</script>
```

### 3.使用Mybatis-plus

#### 1.pom.xml

```
<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>mybatis-plus-boot-starter</artifactId>
    <version>最新版本</version>
</dependency>
```

#### 2.MybatisPlusConfig

```java
@Configuration
/**
 * 扫描指定包下所有的接口类，然后所有接口在编译之后都会生成相应的实现类
 * 这样“com.xiaolin.springboot.mapper”包下的mapper文件中都不需要在@Mapper
 */
@MapperScan("com.xiaolin.springboot.mapper")
public class MybatisPlusConfig {
    /**
     * 新的分页插件,一缓和二缓遵循mybatis的规则,需要设置 MybatisConfiguration#useDeprecatedExecutor = false 避免缓存出现问题(该属性会在旧插件移除后一同移除)
     */
    @Bean
    public MybatisPlusInterceptor mybatisPlusInterceptor() {
        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
        /**
         * DbType:后面的数据库类型记得修改
         */
        interceptor.addInnerInterceptor(new PaginationInnerInterceptor(DbType.MYSQL));
        return interceptor;
    }
}
```

![image-20230727233940926](D:\SpringBoot+Vue\assets\image-20230727233940926.png)

### 4.使用Mybatis-plus进行分页查询

#### UserController

```java
    /**
     * 使用Mybatis-plus
     * @RequestParam(defaultValue = ""):设置默认值，如果用户不传，则不会写入sql语句中
     */
    @GetMapping("/page")
     public IPage<User> findPage(@RequestParam Integer pageNum,
                                 @RequestParam Integer pageSize,
                                 @RequestParam(defaultValue = "") String username,
                                 @RequestParam(defaultValue = "") String nickname,
                                 @RequestParam(defaultValue = "") String address
                                )
    {
        IPage<User> page=new Page<>(pageNum,pageSize);
        QueryWrapper<User> queryWrapper = new QueryWrapper<>();
        /**
         * 有“or”则其他条件会失效
         */
        if(!"".equals(username)){//只有当不为空的时候才可以进行拼接
            queryWrapper.like("username",username);
        }
        if(!"".equals(nickname)){//只有当不为空的时候才可以进行拼接
            queryWrapper.like("nickname",nickname);
        }
        if(!"".equals(address)){//只有当不为空的时候才可以进行拼接
            queryWrapper.like("address",address);
        }
        return userService.page(page,queryWrapper);
    }
```

#### UserService

```java
@Service//将实例对象交给IOC容器
public class UserService extends ServiceImpl<UserMapper,User> {
        /**
     * 使用mybatis-plus方法实现增加和修改
     */
    public boolean saveUser(User user) {
        //方法一
        if(user.getId()==null){
            return save(user);//mybatis-plus提供的方法，表示插入数据
        }else {
            return updateById(user);//这个方法也是mybatis-plus提供的
        }
        //方法二：
//        return saveOrUpdate(user);
    }
}
```

#### UserMapper

```java
//@Mapper//在config/MybatisPlusConfig文件中已经使用@MapperScan，故这里不在使用
public interface UserMapper extends BaseMapper<User> {
}
```

#### MybatisPlusConfig

```java
@Configuration
/**
 * 扫描指定包下所有的接口类，然后所有接口在编译之后都会生成相应的实现类
 * 这样“com.xiaolin.springboot.mapper”包下的mapper文件中都不需要在@Mapper
 */
@MapperScan("com.xiaolin.springboot.mapper")
public class MybatisPlusConfig {
    /**
     * 新的分页插件,一缓和二缓遵循mybatis的规则,需要设置 MybatisConfiguration#useDeprecatedExecutor = false 避免缓存出现问题(该属性会在旧插件移除后一同移除)
     */
    @Bean
    public MybatisPlusInterceptor mybatisPlusInterceptor() {
        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
        /**
         * DbType:后面的数据库类型记得修改
         */
        interceptor.addInnerInterceptor(new PaginationInnerInterceptor(DbType.MYSQL));
        return interceptor;
    }
}
```

# 七、Vue实现增删改查

### 1.使用fetch向后台请求数据

#### UserController

```java
@RestController
@RequestMapping("/user")//将该文件要进行访问时候，统一地址为“user”
public class UserController {

    @Autowired//导入UserMapper的实例对象
    private UserMapper userMapper;

    @Autowired
    private UserService userService;

    //分页查询
    //接口路径 ：/user/page?pageNum=1&pageSize=10
    /**
     * @RequestParam:是将输入的数据分别进行映射【pageNum=1 pageSize=10】
     * @param pageNum
     * @param pageSize
     * @return
     * limit第一个参数=（pageNum-1） * pageSize
     * limit第二个参数
     */
    @GetMapping("/page")
    public Map<String, Object> findPage(@RequestParam Integer pageNum, @RequestParam Integer pageSize){
        pageNum=(pageNum-1)*pageSize;
        //data是渲染出来的数据
        List<User> data = userMapper.selectPage(pageNum, pageSize);
        //查询总条数
        Integer total = userMapper.selectTotal();
        //封装成一个Map对象
        Map<String,Object> res=new HashMap<>();
        res.put("data",data);
        res.put("total",total);
        return res;
    }

}
```

#### UserMapper

```java
/**
 * 用于数据库连接
 */
@Mapper
public interface UserMapper {

    /**
     * SpringBoot实现分页查询的基本原理
     * @param pageNum
     * @param pageSize
     * @return
     */
    @Select("select * from sys_user limit #{pageNum} ,#{pageSize};")
    List<User> selectPage(Integer pageNum, Integer pageSize);

    /**
     * 查看总条数
     * @return
     */
    @Select("select count(*) from sys_user;")
    Integer selectTotal();
}
```

#### HomeView.vue

![image-20230726222825738](D:\SpringBoot+Vue\assets\image-20230726222825738.png)

![image-20230726223035231](D:\SpringBoot+Vue\assets\image-20230726223035231.png)

![image-20230726223108538](D:\SpringBoot+Vue\assets\image-20230726223108538.png)

![image-20230726223133105](D:\SpringBoot+Vue\assets\image-20230726223133105.png)

```vue
          <el-table :data="tableData" border stripe>
            <el-table-column prop="id" label="ID" width="80"></el-table-column>
            <el-table-column prop="username" label="用户名" width="140"></el-table-column>
            <el-table-column prop="nickname" label="昵称" width="120"></el-table-column>
            <el-table-column prop="email" label="邮箱"></el-table-column>
            <el-table-column prop="phone" label="电话"></el-table-column>
            <el-table-column prop="address" label="地址"></el-table-column>
            <el-table-column label="操作">
                <template slot-scope="scope">
                  <el-button type="success">编辑<i class="el-icon-edit"></i></el-button>
                  <el-button type="danger">删除<i class="el-icon-remove-outline"></i></el-button>
                </template>
            </el-table-column>
          </el-table>
          


<!--          下方的分页-->
          <div style="padding: 10px 0">
<!--            current-page:当前的页数-->
            <el-pagination
                @size-change="handleSizeChange"
                @current-change="handleCurrentChange"
                :current-page="pageNum"
                :page-sizes="[2, 5, 10, 20]"
                :page-size="pageSize"
                layout="total, sizes, prev, pager, next, jumper"
                :total="total">
            </el-pagination>
          </div>
        </el-main>
      </el-container>
    </el-container>
</template>

<script>

export default {
  name: 'HomeView',
  data(){
    return {
      msg: "您好",
      tableData: [],
      collapseBtnClass: 'el-icon-s-fold',
      //侧边栏默认是展开的
      isCollapse: false,
      //默认值是200px
      sideWidth:200,
      logoTextShow:true,
      //数据的条数
      total:0,
      //当前页数
      pageNum:1,
      //一页展示的条数
      pageSize:2,
    };
  },
  created() {
    //请求分页查询数据
    this.load();
  },
  methods:{
    collapse(){//点击收缩按钮触发
      this.isCollapse=!this.isCollapse
      if(this.isCollapse){
        this.sideWidth=64
        //修改图标
        this.collapseBtnClass='el-icon-s-unfold'
        //文字是否消失
        this.logoTextShow=false
      }else {
        this.sideWidth=200
        this.collapseBtnClass='el-icon-s-fold'
        this.logoTextShow=true
      }
    },
    //进行数据的请求
    load(){
      fetch("http://localhost:9090/user/page?pageNum="+this.pageNum+"&pageSize="+this.pageSize)
          .then(res=>res.json())
          .then(res=>{
            console.log(res)
            this.tableData=res.data
            this.total=res.total
          })
    },
    handleSizeChange(pageSize){
      console.log(pageSize);
      //将获取到用户选择的数值进行复制
      this.pageSize=pageSize
      //获取到对应的页码时要进行数据请求
      this.load()
    },
    handleCurrentChange(pageNum){
      console.log(pageNum)
      //将获取到用户选择的数值进行复制
      this.pageNum=pageNum
      //获取到对应的页码时要进行数据请求
      this.load()
    },
  }
}
</script>
```

### 2.使用axios请求后台数据

#### 2.1 全局安装axios

【记得在vue文件夹下进行】

```
npm i axios -S
```

![image-20230729184134463](D:\SpringBoot+Vue\assets\image-20230729184134463.png)

#### 2.2 在src目录下创建一个“utils”文件夹，创建一个“request.js"

参考：[(29条消息) Vue项目搭建常用的配置文件，request.js和vue.config.js_vue.config.js base_程序员青戈的博客-CSDN博客](https://blog.csdn.net/xqnode/article/details/118325868?ops_request_misc=&request_id=331a8cd7e8924f9aa0e4eb2f349f593f&biz_id=&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~koosearch~default-1-118325868-null-null.268^v1^control&utm_term=axios&spm=1018.2226.3001.4450)

```js
import axios from 'axios'

const request = axios.create({
	baseURL: '/api',  // 注意！！ 这里是全局统一加上了 '/api' 前缀，也就是说所有接口都会加上'/api'前缀在，页面里面写接口的时候就不要加 '/api'了，否则会出现2个'/api'，类似 '/api/api/user'这样的报错，切记！！！
    timeout: 5000
})

// request 拦截器
// 可以自请求发送前对请求做一些处理
// 比如统一加token，对请求参数统一加密
request.interceptors.request.use(config => {
    config.headers['Content-Type'] = 'application/json;charset=utf-8';
  
 // config.headers['token'] = user.token;  // 设置请求头
    return config
}, error => {
    return Promise.reject(error)
});

// response 拦截器
// 可以在接口响应后统一处理结果
request.interceptors.response.use(
    response => {
        let res = response.data;
        // 如果是返回的文件
        if (response.config.responseType === 'blob') {
            return res
        }
        // 兼容服务端返回的字符串数据
        if (typeof res === 'string') {
            res = res ? JSON.parse(res) : res
        }
        return res;
    },
    error => {
        console.log('err' + error) // for debug
        return Promise.reject(error)
    }
)


export default request


```

#### 3.在main.js中进行注册

![image-20230729184837836](D:\SpringBoot+Vue\assets\image-20230729184837836.png)

![image-20230729184929212](D:\SpringBoot+Vue\assets\image-20230729184929212.png)

#### 4.在对应的组件中使用axios

![image-20230729185827484](D:\SpringBoot+Vue\assets\image-20230729185827484.png)

#### 5.在浏览器中查看请求到的数据

![image-20230729185803947](D:\SpringBoot+Vue\assets\image-20230729185803947.png)

```vue
    load(){
      request.get("http://localhost:9090/user/page?pageNum=" + this.pageNum + "&pageSize=" + this.pageSize + "&username=" + this.username).then(res => {
        console.log(res)
        // records是我们res中需要进行展示的data数据
        this.tableData=res.records;
        this.total=res.total;
      });
    },
```

```js
    load(){
      request.get("http://localhost:9090/user/page",{
        params:{
          pageNum:this.pageNum,
          pageSize:this.pageNum,
          username:this.username
        }
      }).then(res=>{
        // records是我们res中需要进行展示的data数据
        this.tableData=res.records;
        this.total=res.total;
      })
    },
```

#### 6.修改baseURL

将固定的链接放入request.js文件中

![image-20230729211126571](D:\SpringBoot+Vue\assets\image-20230729211126571.png)

![image-20230729211152419](D:\SpringBoot+Vue\assets\image-20230729211152419.png)

### 3.新增

#### 3.1 新增弹窗

![image-20230729203055555](D:\SpringBoot+Vue\assets\image-20230729203055555.png)

![image-20230729203110667](D:\SpringBoot+Vue\assets\image-20230729203110667.png)

![image-20230729203119219](D:\SpringBoot+Vue\assets\image-20230729203119219.png)

![image-20230729203126065](D:\SpringBoot+Vue\assets\image-20230729203126065.png)

```vue
<el-button type="primary" @click="handleAdd">新增<i class="el-icon-plus"></i></el-button>


<!--          新增弹窗-->
          <el-dialog title="用户信息" :visible.sync="dialogFormVisible" width="30%">
            <el-form label-width="80px">
              <el-form-item label="用户名">
                <el-input v-model="form.name" autocomplete="off"></el-input>
              </el-form-item>
              <el-form-item label="昵称">
                <el-input v-model="form.name" autocomplete="off"></el-input>
              </el-form-item>
              <el-form-item label="邮箱">
                <el-input v-model="form.address" autocomplete="off"></el-input>
              </el-form-item>
              <el-form-item label="电话">
                <el-input v-model="form.phone" autocomplete="off"></el-input>
              </el-form-item>
              <el-form-item label="地址">
                <el-input v-model="form.address" autocomplete="off"></el-input>
              </el-form-item>
            </el-form>
            <div slot="footer" class="dialog-footer">
              <el-button @click="dialogFormVisible = false">取 消</el-button>
              <el-button type="primary" @click="dialogFormVisible = false">确 定</el-button>
            </div>
          </el-dialog>


data(){
	return{
	  //设置”新增“弹窗是否展示，默认不展示
      dialogFormVisible:false,
      //新增的用户信息的数据
      form:{},
	}
},
methods:{
	    handleAdd(){
      		this.dialogFormVisible=true
    	}
}
```

#### 3.2 将用户输入的数据加入到数据库中

![image-20230729210533595](D:\SpringBoot+Vue\assets\image-20230729210533595.png)

```vue
 <el-button type="primary" @click="save">确 定</el-button>

    //发送数据到后台
    save(){
      request.post("http://localhost:9090/user",this.form).then(res=>{
        if(res){
          this.$message.success("保存成功");
          //保存成功后将弹窗关闭
          this.dialogFormVisible=false
        }else {
          this.$message.error("保存失败")
        }
      })
    },
```

#### 3.3 将数据展示设置为倒叙

UserController

```java
    @GetMapping("/page")
     public IPage<User> findPage(@RequestParam Integer pageNum,
                                 @RequestParam Integer pageSize,
                                 @RequestParam(defaultValue = "") String username,
                                 @RequestParam(defaultValue = "") String nickname,
                                 @RequestParam(defaultValue = "") String address
                                )
    {
        IPage<User> page=new Page<>(pageNum,pageSize);
        QueryWrapper<User> queryWrapper = new QueryWrapper<>();
        /**
         * 有“or”则其他条件会失效
         */
        if(!"".equals(username)){//只有当不为空的时候才可以进行拼接
            queryWrapper.like("username",username);
        }
        if(!"".equals(nickname)){//只有当不为空的时候才可以进行拼接
            queryWrapper.like("nickname",nickname);
        }
        if(!"".equals(address)){//只有当不为空的时候才可以进行拼接
            queryWrapper.like("address",address);
        }
        //将数据进行倒叙展示
        queryWrapper.orderByDesc("id");
        return userService.page(page,queryWrapper);
    }
```

#### 3.4 添加表单验证

![image-20230730101314538](D:\SpringBoot+Vue\assets\image-20230730101314538.png)

![image-20230730101422529](D:\SpringBoot+Vue\assets\image-20230730101422529.png)

![image-20230730101535338](D:\SpringBoot+Vue\assets\image-20230730101535338.png)

```vue
<!--          新增弹窗-->
          <el-dialog title="用户信息" :visible.sync="dialogFormVisible" width="30%">
            <el-form label-width="80px" :model="form" :rules="rules" ref="ruleForm">
              <el-form-item label="用户名" prop="username">
                <el-input v-model="form.username" autocomplete="off"></el-input>
              </el-form-item>
              <el-form-item label="昵称" prop="nickname">
                <el-input v-model="form.nickname" autocomplete="off"></el-input>
              </el-form-item>
              <el-form-item label="邮箱" prop="email">
                <el-input v-model="form.email" autocomplete="off"></el-input>
              </el-form-item>
              <el-form-item label="电话" prop="phone">
                <el-input v-model="form.phone" autocomplete="off"></el-input>
              </el-form-item>
              <el-form-item label="地址" prop="address">
                <el-input v-model="form.address" autocomplete="off"></el-input>
              </el-form-item>
            </el-form>
            <div slot="footer" class="dialog-footer">
              <el-button @click="dialogFormVisible = false">取 消</el-button>
              <el-button type="primary" @click="submitForm('ruleForm')">确 定</el-button>
            </div>
          </el-dialog>
          
          
      //新增的用户信息的数据
      form:{
        username:'',
        nickname:'',
        email:'',
        phone:'',
        address:''
      },
      //新增用户的表单验证
      rules:{
        username:[
          { required: true, message: '请输入用户名', trigger: 'blur' },
          { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }
        ],
        nickname:[
          { required: true, message: '请输入昵称', trigger: 'blur' },
        ],
        email:[
          { required: true, message: '请输入邮箱', trigger: 'blur' },
        ],
        phone:[
          { required: true, message: '请输入电话号', trigger: 'blur' },
          { min: 11, max: 11, message: '长度11个字符', trigger: 'blur' }
        ],
        address:[
          { required: true, message: '请输入地址', trigger: 'blur' },
        ],
      },
      
      
    //“添加”的确定表单验证
    submitForm(form) {
      this.$refs[form].validate((valid) => {
        if (valid) {
          //将数据进行保存
          this.save()
        } else {
          console.log('error submit!!');
          return false;
        }
      });
    }
```

### 4.编辑

![image-20230729211702715](D:\SpringBoot+Vue\assets\image-20230729211702715.png)

```vue
            <el-table-column label="操作">
                <template slot-scope="scope">
                  <el-button type="success" @click="handleEdit(scope.row)">编辑<i class="el-icon-edit"></i></el-button>
                </template>
            </el-table-column>
          </el-table>
          
          
    //”编辑“按钮
    handleEdit(row) {
      //row是获取到的数据
      this.form = row
      //打开弹窗
      this.dialogFormVisible=true
    }
```

#### 注意点：

因为我们后端的新增和修改使用同一个地址（接口），所以我们需要在save（）方法中增加刷新的方法

![image-20230729212011579](D:\SpringBoot+Vue\assets\image-20230729212011579.png)

### 5.删除

![image-20230729213647512](D:\SpringBoot+Vue\assets\image-20230729213647512.png)

#### 5.1 二次确认删除按钮

![image-20230729213849848](D:\SpringBoot+Vue\assets\image-20230729213849848.png)

#### 5.2 注意点

确定是否删除的是再二次确认按钮上，故点击事件要添加到”二次确定“上

![image-20230729214336476](D:\SpringBoot+Vue\assets\image-20230729214336476.png)

#### 5.3 删除单个

```vue
              <template slot-scope="scope">
                <el-button type="success" @click="handleEdit(scope.row);">编辑<i class="el-icon-edit"></i></el-button>
<!--                删除的二次提示-->
                <el-popconfirm
                    confirm-button-text='确定'
                    cancel-button-text='我再想想'
                    icon="el-icon-info"
                    icon-color="red"
                    title="您确定删除吗？"
                    comfirm="del(scope.row.id)"
                >
                  <!--  因为删除的接口只需要传入【id】，故这里就传id-->
                  <el-button type="danger">删除<i class="el-icon-remove-outline"></i>
                  </el-button>
                </el-popconfirm>

              </template>
              
              
    //点击”删除“按钮
    del(id){
      request.delete("/user/"+ id).then(res=>{
        if(res){
          this.$message.success("删除成功")
          this.load()
        }else {
          this.$message.error("删除失败")
        }
      })
    },
```

#### 5.4 批量删除

![image-20230729214627257](D:\SpringBoot+Vue\assets\image-20230729214627257.png)

后台要新增一个接口，进行批量删除：UserController

```java
    //使用Mybatis-plus，进行批量删除
    @DeleteMapping("/del/batch")
    public boolean deleteBatch(@RequestBody List<Integer> ids){//此时ids是一个数组
        return userService.removeBatchByIds(ids);
    }
```

因为后台的批量删除接口接收到的数据是一个数组，而前台接收到的数据是一个对象，所以我们再点击“批量删除”按钮的时候，将数据类型进行转换

![image-20230729215943059](D:\SpringBoot+Vue\assets\image-20230729215943059.png)

![image-20230729215958720](D:\SpringBoot+Vue\assets\image-20230729215958720.png)

![image-20230729220124008](D:\SpringBoot+Vue\assets\image-20230729220124008.png)

![image-20230729220141093](D:\SpringBoot+Vue\assets\image-20230729220141093.png)

```js
            <!--                删除的二次提示-->
            <el-popconfirm
                confirm-button-text='确定'
                cancel-button-text='我再想想'
                icon="el-icon-info"
                icon-color="red"
                title="您确定批量删除这些数据吗？"
                @confirm="delBatch"
            >
            <el-button type="danger" slot="reference" style="margin-left: 5px">批量删除<i class="el-icon-minus"></i></el-button>
            </el-popconfirm>
            
      //评论删除的数据
      multipleSelection:[],      
  
  
  
    //点击”批量删除“
    handleSelectionChange(val) {//val是一个对象，而后台接口的ids是一个数组
      // console.log(val);
      this.multipleSelection=val
    },
    //将上面的val从对象转换为数组
    delBatch(){
      let ids=this.multipleSelection.map(v=>v.id)//[{},{},{}] => [1,2,3]
      request.delete("/user/del/batch", {data:ids}).then(res=>{
        if(res){
          this.$message.success("批量删除成功")
          this.load()
        }else {
          this.$message.error("批量删除失败")
        }
      })
    },
```

# 八、SpringBoot代码生成器

### 1.官网：

[MyBatis-Plus (baomidou.com)](https://baomidou.com/)

### 2.导入依赖

#### 2.1 代码生成器

![image-20230730103246730](D:\SpringBoot+Vue\assets\image-20230730103246730.png)

#### 2.2 Velocity

[Maven Repository: org.apache.velocity » velocity » 1.7 (mvnrepository.com)](https://mvnrepository.com/artifact/org.apache.velocity/velocity/1.7)

```
<!-- https://mvnrepository.com/artifact/org.apache.velocity/velocity -->
<dependency>
    <groupId>org.apache.velocity</groupId>
    <artifactId>velocity</artifactId>
    <version>1.7</version>
</dependency>
```

完整依赖

```
<!--        代码生成器-->
        <dependency>
            <groupId>com.baomidou</groupId>
            <artifactId>mybatis-plus-generator</artifactId>
            <version>3.5.1</version>
        </dependency>
<!--        velocity的依赖-->
        <!-- https://mvnrepository.com/artifact/org.apache.velocity/velocity -->
        <dependency>
            <groupId>org.apache.velocity</groupId>
            <artifactId>velocity</artifactId>
            <version>1.7</version>
        </dependency>
```

### 3.MP的代码生成器模板

```java
    private static void generate(){
        FastAutoGenerator.create("url", "username", "password")
                .globalConfig(builder -> {
                    builder.author("baomidou") // 设置作者
                            .enableSwagger() // 开启 swagger 模式
                            .fileOverride() // 覆盖已生成文件
                            .outputDir("D://"); // 指定输出目录
                })
                .packageConfig(builder -> {
                    builder.parent("com.baomidou.mybatisplus.samples.generator") // 设置父包名
                            .moduleName("system") // 设置父包模块名
                            .pathInfo(Collections.singletonMap(OutputFile.mapperXml, "D://")); // 设置mapperXml生成路径
                })
                .strategyConfig(builder -> {
                    builder.addInclude("t_simple") // 设置需要生成的表名
                            .addTablePrefix("t_", "c_"); // 设置过滤表前缀
                })
//                .templateEngine(new FreemarkerTemplateEngine()) // 使用Freemarker引擎模板，默认的是Velocity引擎模板
                .execute();
    }
```

### 4.修改后的模板

##### 注意点：记得路径要写对！！！！！！记得先备份

```java
/**
 * MP:代码生成器
 */
public class CodeGenerator {
    public static void main(String[] args) {
        generate();
    }

    private static void generate(){
        FastAutoGenerator.create("jdbc:mysql://localhost:3306/lin?serverTimezone=GMT%2b8", "root", "111111")
                .globalConfig(builder -> {
                    builder.author("小林") // 设置作者
//                            .enableSwagger() // 开启 swagger 模式
                            .fileOverride() // 覆盖已生成文件
                            .outputDir("D:\\SpringBoot+Vue\\springboot\\src\\main\\java\\"); // 指定输出目录
                })
                .packageConfig(builder -> {
                    builder.parent("com.xiaolin.springboot") // 设置父包名
                            .moduleName(null) // 设置父包模块名
                            .pathInfo(Collections.singletonMap(OutputFile.mapperXml, "D:\\SpringBoot+Vue\\springboot\\src\\main\\resources\\mapper\\")); // 设置mapperXml生成路径
                })
                .strategyConfig(builder -> {
                    builder.addInclude("sys_user") // 设置需要生成的表名
                            .addTablePrefix("t_", "sys_"); // 设置过滤表前缀
                })
//                .templateEngine(new FreemarkerTemplateEngine()) // 使用Freemarker引擎模板，默认的是Velocity引擎模板
                .execute();
    }
}
```

![image-20230730105359272](D:\SpringBoot+Vue\assets\image-20230730105359272.png)

##### 生成新文件后将原来的UserService和User.xml文件删除

### 5.自定义模板

#### 参考链接：

[(29条消息) Mybatis-Plus自动生成代码，自定义Controller_mybatis plus 生成controller_程序员青戈的博客-CSDN博客](https://blog.csdn.net/xqnode/article/details/122704540?ops_request_misc=&request_id=0caeec71333949b484702332bf92e6df&biz_id=&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~koosearch~default-1-122704540-null-null.268^v1^control&utm_term=自动生成代码&spm=1018.2226.3001.4450)

##### 通过修改模板，使得生成器可以直接生成自己想要的代码

![image-20230730110000897](D:\SpringBoot+Vue\assets\image-20230730110000897.png)

##### 将相关的包导入

![image-20230730110310339](D:\SpringBoot+Vue\assets\image-20230730110310339.png)

```java
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

/**
* 后续导入实体要用到的
*/
import $!{package.Service}.$!{table.serviceName};
import ${package.Entity}.${entity};
```

#### 修改后的contoller.java.vm

```java
package ${package.Controller};

import com.baomidou.mybatisplus.extension.plugins.pagination.Page;
import org.springframework.web.bind.annotation.*;
import javax.annotation.Resource;
import java.util.List;

import $!{package.Service}.$!{table.serviceName};
import ${package.Entity}.${entity};

#if(${superControllerClassPackage})
import ${superControllerClassPackage};
#end

/**
 * <p>
 * $!{table.comment} 前端控制器
 * </p>
 *
 * @author ${author}
 * @since ${date}
 */
#if(${restControllerStyle})
@RestController
#else
@Controller
#end
@RequestMapping("#if(${package.ModuleName})/${package.ModuleName}#end/#if(${controllerMappingHyphenStyle})${controllerMappingHyphen}#else${table.entityPath}#end")
#if(${kotlin})
class ${table.controllerName}#if(${superControllerClass}) : ${superControllerClass}()#end

#else
    #if(${superControllerClass})
    public class ${table.controllerName} extends ${superControllerClass} {
    #else
    public class ${table.controllerName} {
    #end

    @Resource
    private ${table.serviceName} ${table.entityPath}Service;

    @PostMapping
    public Boolean save(@RequestBody ${entity} ${table.entityPath}) {
        return ${table.entityPath}Service.saveOrUpdate(${table.entityPath});
        }

    @DeleteMapping("/{id}")
    public Boolean delete(@PathVariable Integer id) {
        return ${table.entityPath}Service.removeById(id);
        }

    @GetMapping
    public List<${entity}> findAll() {
        return ${table.entityPath}Service.list();
        }

    @GetMapping("/{id}")
    public List<${entity}> findOne(@PathVariable Integer id) {
        return ${table.entityPath}Service.list();
        }

    @GetMapping("/page")
    public Page<${entity}> findPage(@RequestParam Integer pageNum, @RequestParam Integer pageSize) {
        return ${table.entityPath}Service.page(new Page<>(pageNum, pageSize));
        }
    }

#end

```

#### 注意点：

![image-20230730114140019](D:\SpringBoot+Vue\assets\image-20230730114140019.png)

这里的链接是“/user"，如果你下面的父路径不进行设置，则会出现”//user"

![image-20230730114247324](D:\SpringBoot+Vue\assets\image-20230730114247324.png)

#### utils/CodeGenerator

```java
public class CodeGenerator {
    public static void main(String[] args) {
        generate();
    }

    private static void generate(){
        FastAutoGenerator.create("jdbc:mysql://localhost:3306/lin?serverTimezone=GMT%2b8", "root", "111111")
                .globalConfig(builder -> {
                    builder.author("小林") // 设置作者
//                            .enableSwagger() // 开启 swagger 模式
                            .fileOverride() // 覆盖已生成文件
                            .outputDir("D:\\SpringBoot+Vue\\springboot\\src\\main\\java\\"); // 指定输出目录
                })
                .packageConfig(builder -> {
                    builder.parent("com.xiaolin.springboot") // 设置父包名
                            .moduleName(null) // 设置父包模块名
                            .pathInfo(Collections.singletonMap(OutputFile.mapperXml, "D:\\SpringBoot+Vue\\springboot\\src\\main\\resources\\mapper\\")); // 设置mapperXml生成路径
                })
                .strategyConfig(builder -> {
                    builder.entityBuilder().enableLombok();
                    builder.mapperBuilder().enableMapperAnnotation();//再mapper接口上添加上@Mapper
                    builder.controllerBuilder().enableHyphenStyle();//当链接中有[下划线]的时候,开启驼峰转连字符
                    builder.controllerBuilder().enableRestStyle();//开启生成@RestController控制器
                    builder.addInclude("sys_user") // 设置需要生成的表名
                            .addTablePrefix("t_", "sys_"); // 设置过滤表前缀
                })
//                .templateEngine(new FreemarkerTemplateEngine()) // 使用Freemarker引擎模板，默认的是Velocity引擎模板
                .execute();
    }
}
```

# 九、Vue路由

### 1.设置主页面：Manage

![image-20230730144531560](D:\SpringBoot+Vue\assets\image-20230730144531560.png)

### 2.将侧边栏组件

![image-20230730145429655](D:\SpringBoot+Vue\assets\image-20230730145429655.png)

![image-20230730145130855](D:\SpringBoot+Vue\assets\image-20230730145130855.png)

#### components/Aside.vue

```vue
<template>
  <el-menu :default-openeds="['1', '3']" style="min-height: 100%; overflow: hidden"
           background-color="rgb(48,65,86)"
           text-color="#fff"
           active-text-color="#ffd04b"
           :collapse-transition="false"
           :collapse="isCollapse"
  >
    <div style="height: 60px;line-height: 60px; text-align: center">
      <img src="../assets/logo.png" alt="" style="width: 20px; position: relative;top: 5px;margin-right: 5px">
      <b style="color:white" v-show="logoTextShow">后台管理系统</b>
    </div>
    <el-submenu index="1">
      <template slot="title">
        <i class="el-icon-location"></i>
        <span slot="title">导航一</span>
      </template>
      <el-menu-item-group>
        <template slot="title">分组一</template>
        <el-menu-item index="1-1">选项1</el-menu-item>
        <el-menu-item index="1-2">选项2</el-menu-item>
      </el-menu-item-group>
      <el-menu-item-group title="分组2">
        <el-menu-item index="1-3">选项3</el-menu-item>
      </el-menu-item-group>
      <el-submenu index="1-4">
        <template slot="title">选项4</template>
        <el-menu-item index="1-4-1">选项4-1</el-menu-item>
      </el-submenu>
    </el-submenu>
    <el-submenu index="2">
      <template slot="title">
        <i class="el-icon-menu"></i>
        <span slot="title">导航二</span>
      </template>
      <el-menu-item-group>
        <template slot="title">分组一</template>
        <el-menu-item index="2-1">选项1</el-menu-item>
        <el-menu-item index="2-2">选项2</el-menu-item>
      </el-menu-item-group>
      <el-menu-item-group title="分组2">
        <el-menu-item index="2-3">选项3</el-menu-item>
      </el-menu-item-group>
      <el-submenu index="2-4">
        <template slot="title">选项4</template>
        <el-menu-item index="2-4-1">选项4-1</el-menu-item>
      </el-submenu>
    </el-submenu>
    <el-submenu index="3">
      <template slot="title">
        <i class="el-icon-setting"></i>
        <span slot="title">导航三</span>
      </template>
      <el-menu-item-group>
        <template slot="title">分组一</template>
        <el-menu-item index="3-1">选项1</el-menu-item>
        <el-menu-item index="3-2">选项2</el-menu-item>
      </el-menu-item-group>
      <el-menu-item-group title="分组2">
        <el-menu-item index="3-3">选项3</el-menu-item>
      </el-menu-item-group>
      <el-submenu index="3-4">
        <template slot="title">选项4</template>
        <el-menu-item index="3-4-1">选项4-1</el-menu-item>
      </el-submenu>
    </el-submenu>
  </el-menu>
</template>

<script>
export default {
  name: "Aside"
}
</script>

<style scoped>

</style>
```

![image-20230730145220610](D:\SpringBoot+Vue\assets\image-20230730145220610.png)

#### view/Manage.vue

![image-20230730174816521](D:\SpringBoot+Vue\assets\image-20230730174816521.png)

#### 添加路由跳转

![image-20230730185818013](D:\SpringBoot+Vue\assets\image-20230730185818013.png)

### 3.头部区域组件

![image-20230730174509878](D:\SpringBoot+Vue\assets\image-20230730174509878.png)

#### components/Header.vue

```vue
<template>
<div style=" line-height: 60px; display: flex">
  <div style="flex: 1;font-size: 18px">
    <!--            给span动态绑定一个“collapseBtnClass”类，收缩框
                    并添加一个点击事件
    -->
    <span :class="collapseBtnClass" style="cursor: pointer" @click="collapse"></span>
  </div>
  <el-dropdown  style="width: 50px;cursor: pointer">
    <span>王小虎</span><i class="el-icon-arrow-down" style="margin-left: 5px"></i>
    <el-dropdown-menu slot="dropdown">
      <el-dropdown-item>个人信息</el-dropdown-item>
      <el-dropdown-item>退出</el-dropdown-item>
    </el-dropdown-menu>
  </el-dropdown>
</div>
</template>

<script>
export default {
  name: "Header",
  props:{
    collapseBtnClass:String,
    collapse:Boolean
  }
}
</script>

<style scoped>

</style>

```

#### view/Manage.vue

![image-20230730174704781](D:\SpringBoot+Vue\assets\image-20230730174704781.png)

### 4.用户区域路由

**用户信息是属于子路由，所以写在view文件夹中**

#### views/User.vue

```vue
<template>
  <div>
    <!--          顶部面包屑区域-->
    <div style="margin-top: 30px">
      <el-breadcrumb separator="/">
        <el-breadcrumb-item :to="{ path: '/' }">首页</el-breadcrumb-item>
        <el-breadcrumb-item><a href="/">用户管理</a></el-breadcrumb-item>
      </el-breadcrumb>
    </div>

    <!--          搜索框-->
    <div style="margin: 10px 0">
      <!--            动态绑定：进行模糊查询-->
      <el-input style="width: 200px;margin-left: 5px"
                suffix-icon="el-icon-search"
                placeholder="请输入名称"
                v-model="username"
      ></el-input>
      <el-input style="width: 200px;margin-left: 5px"
                suffix-icon="el-icon-message"
                placeholder="请输入邮箱"
                v-model="email"
      ></el-input>
      <el-input style="width: 200px;margin-left: 5px"
                suffix-icon="el-icon-position"
                placeholder="请输入地址"
                v-model="address"
      ></el-input>
      <el-button style="margin-left: 5px" type="primary" @click="load">搜索</el-button>
      <el-button style="margin-left: 5px" type="danger" @click="reset">重置</el-button>
    </div>

    <div style="margin: 10px 0">
      <el-button type="primary" @click="handleAdd">新增<i class="el-icon-plus"></i></el-button>

      <!--                删除的二次提示-->
      <el-popconfirm
          confirm-button-text='确定'
          cancel-button-text='我再想想'
          icon="el-icon-info"
          icon-color="red"
          title="您确定批量删除这些数据吗？"
          @confirm="delBatch"
      >
        <el-button type="danger" slot="reference" style="margin-left: 5px">批量删除<i class="el-icon-minus"></i></el-button>
      </el-popconfirm>

      <el-button type="primary" style="margin-left: 5px">导入<i class="el-icon-bottom"></i></el-button>
      <el-button type="primary">导出<i class="el-icon-top"></i></el-button>

    </div>
    <!--          @selection-change：是”批量删除“是否选中的事件-->
    <el-table :data="tableData" border stripe @selection-change="handleSelectionChange">
      <!--            批量删除选项框-->
      <el-table-column
          type="selection"
          width="55">
      </el-table-column>
      <el-table-column prop="id" label="ID" width="80"></el-table-column>
      <el-table-column prop="username" label="用户名" width="140"></el-table-column>
      <el-table-column prop="nickname" label="昵称" width="120"></el-table-column>
      <el-table-column prop="email" label="邮箱"></el-table-column>
      <el-table-column prop="phone" label="电话"></el-table-column>
      <el-table-column prop="address" label="地址"></el-table-column>
      <el-table-column label="操作">
        <template v-slot="scope">
          <el-button type="success" @click="handleEdit(scope.row);">编辑<i class="el-icon-edit"></i></el-button>
          <!--                删除的二次提示-->
          <el-popconfirm
              confirm-button-text='确定'
              cancel-button-text='我再想想'
              icon="el-icon-info"
              icon-color="red"
              title="您确定删除吗？"
              @confirm="del(scope.row.id)"
          >
            <!--  因为删除的接口只需要传入【id】，故这里就传id-->
            <el-button type="danger" slot="reference">删除<i class="el-icon-remove-outline"></i></el-button>
          </el-popconfirm>

        </template>
      </el-table-column>
    </el-table>

    <!--          下方的分页-->
    <div style="padding: 10px 0">
      <!--            current-page:当前的页数-->
      <el-pagination
          @size-change="handleSizeChange"
          @current-change="handleCurrentChange"
          :current-page="pageNum"
          :page-sizes="[2, 5, 10, 20]"
          :page-size="pageSize"
          layout="total, sizes, prev, pager, next, jumper"
          :total="total">
      </el-pagination>
    </div>

    <!--          新增弹窗-->
    <el-dialog title="用户信息" :visible.sync="dialogFormVisible" width="30%">
      <el-form label-width="80px" :model="form" :rules="rules" ref="ruleForm">
        <el-form-item label="用户名" prop="username">
          <el-input v-model="form.username" autocomplete="off"></el-input>
        </el-form-item>
        <el-form-item label="昵称" prop="nickname">
          <el-input v-model="form.nickname" autocomplete="off"></el-input>
        </el-form-item>
        <el-form-item label="邮箱" prop="email">
          <el-input v-model="form.email" autocomplete="off"></el-input>
        </el-form-item>
        <el-form-item label="电话" prop="phone">
          <el-input v-model="form.phone" autocomplete="off"></el-input>
        </el-form-item>
        <el-form-item label="地址" prop="address">
          <el-input v-model="form.address" autocomplete="off"></el-input>
        </el-form-item>
      </el-form>
      <div slot="footer" class="dialog-footer">
        <el-button @click="dialogFormVisible = false">取 消</el-button>
        <el-button type="primary" @click="submitForm('ruleForm')">确 定</el-button>
      </div>
    </el-dialog>
  </div>
</template>

<script>
export default {
  name: "User",
  data(){
    return{
      //页面数据的展示
      tableData: [],
      //数据的条数
      total:0,
      //当前页数
      pageNum:1,
      //一页展示的条数
      pageSize:2,
      //页面数据模糊查询
      username:'',
      email:'',
      address:'',
      //新增的用户信息的数据
      form:{
        username:'',
        nickname:'',
        email:'',
        phone:'',
        address:''
      },
      //设置”新增“弹窗是否展示，默认不展示
      dialogFormVisible:false,
      //新增用户的表单验证
      rules:{
        username:[
          { required: true, message: '请输入用户名', trigger: 'blur' },
          { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }
        ],
        nickname:[
          { required: true, message: '请输入昵称', trigger: 'blur' },
        ],
        email:[
          { required: true, message: '请输入邮箱', trigger: 'blur' },
        ],
        phone:[
          { required: true, message: '请输入电话号', trigger: 'blur' },
          { min: 11, max: 11, message: '长度11个字符', trigger: 'blur' }
        ],
        address:[
          { required: true, message: '请输入地址', trigger: 'blur' },
        ],
      },
      //评论删除的数据
      multipleSelection:[],
    }
  },
  methods:{
    //进行数据的请求
    /**load(){
      fetch("http://localhost:9090/user/page?pageNum="+this.pageNum+"&pageSize="+this.pageSize+"&username="+this.username)
          .then(res=>res.json())
          .then(res=>{
            console.log(res)
            this.tableData=res.data
            this.total=res.total
          })
    },
     */
    /**
     * 简单写法
     load(){
      request.get("http://localhost:9090/user/page?pageNum=" + this.pageNum + "&pageSize=" + this.pageSize + "&username=" + this.username).then(res => {
        console.log(res)
        // records是我们res中需要进行展示的data数据
        this.tableData=res.records;
        this.total=res.total;
      });
    },
     */
    //向后台请求数据
    load(){
      this.request.get("/user/page",{
        params:{
          pageNum:this.pageNum,
          pageSize:this.pageSize,
          username:this.username,
          email:this.email,
          address:this.address
        }
      }).then(res=>{
        // records是我们res中需要进行展示的data数据
        this.tableData=res.records;
        this.total=res.total;
      })
    },
    //【增加and修改：因为两者都使用同一个接口】发送数据到后台
    save(){
      this.request.post("/user",this.form).then(res=>{
        if(res){
          this.$message.success("保存成功");
          //保存成功后将弹窗关闭
          this.dialogFormVisible=false
          //重新加载
          this.load()
        }else {
          this.$message.error("保存失败")
        }
      })
    },
    handleSizeChange(pageSize){
      console.log(pageSize);
      //将获取到用户选择的数值进行复制
      this.pageSize=pageSize
      //获取到对应的页码时要进行数据请求
      this.load()
    },
    handleCurrentChange(pageNum){
      console.log(pageNum)
      //将获取到用户选择的数值进行复制
      this.pageNum=pageNum
      //获取到对应的页码时要进行数据请求
      this.load()
    },
    //搜索数据清空
    reset(){
      this.username=''
      this.email=''
      this.address=''
      //重新显示数据
      this.load()
    },
    //清空搜索框中的数据，使得下一次添加弹出框中的数据为空
    resetFormByMySelf(){
      this.form.username=''
      this.form.nickname=''
      this.form.email=''
      this.form.phone=''
      this.form.address=''
    },
    //点击”新增“按钮，弹出对话框
    handleAdd(){
      //当要进行多次添加时，上一个添加成功的数据不应该出现再新增的表单中
      this.resetFormByMySelf()
      this.dialogFormVisible=true
    },
    //点击”删除“按钮
    del(id){
      this.request.delete("/user/"+ id).then(res=>{
        if(res){
          this.$message.success("删除成功")
          this.load()
        }else {
          this.$message.error("删除失败")
        }
      })
    },
    //点击”批量删除“
    handleSelectionChange(val) {//val是一个对象，而后台接口的ids是一个数组
      // console.log(val);
      this.multipleSelection=val
    },
    //将上面的val从对象转换为数组
    delBatch(){
      let ids=this.multipleSelection.map(v=>v.id)//[{},{},{}] => [1,2,3]
      this.request.delete("/user/del/batch", {data:ids}).then(res=>{
        if(res){
          this.$message.success("批量删除成功")
          this.load()
        }else {
          this.$message.error("批量删除失败")
        }
      })
    },
    //“编辑”按钮，点击将数据赋值到待修改的表单中
    handleEdit(row){
      this.dialogFormVisible=true
      this.form=row
    },
    //“添加”的确定表单验证
    submitForm(form) {
      this.$refs[form].validate((valid) => {
        if (valid) {
          //将数据进行保存
          this.save()
        } else {
          console.log('error submit!!');
          return false;
        }
      });
    }
  },
  created() {
    this.load()
  }
}
</script>

<style scoped>

</style>

```

#### 修改router/index.js中的子路由

```js
const routes = [
  {
    path: '/',
    name: 'Manage',
    component: ()=>import("../views/Manage"),
    children:[
      {
        path:'user',name:'User',component:()=>import("../views/User")
      }
    ]
  },
  {
    path: '/about',
    name: 'about',
    component: () => import( '../views/AboutView.vue')
  }
]
```

![image-20230730175234292](D:\SpringBoot+Vue\assets\image-20230730175234292.png)

![image-20230730175245717](D:\SpringBoot+Vue\assets\image-20230730175245717.png)

#### views/User.vue

![image-20230730175354432](D:\SpringBoot+Vue\assets\image-20230730175354432.png)

###  5.首页区域路由

#### views/Home.vue

![image-20230730185422562](D:\SpringBoot+Vue\assets\image-20230730185422562.png)

#### index.js

![image-20230730185445514](D:\SpringBoot+Vue\assets\image-20230730185445514.png)

### 6.点击头部的导航，进行跳转

#### 6.1 安装vuex

```
npm install vuex@3.6.2 -S
```

![image-20230730190410371](D:\SpringBoot+Vue\assets\image-20230730190410371.png)

![image-20230730190359472](D:\SpringBoot+Vue\assets\image-20230730190359472.png)

#### 6.2 在main.js中导入

![image-20230730190803957](D:\SpringBoot+Vue\assets\image-20230730190803957.png)

```js
//导入store/index.js
import store from "@/store/index"

//全局注册
new Vue({
  router,
  store,
  render: h => h(App)
}).$mount('#app')
```

#### 6.3.router/index.js

```js
import Vue from 'vue'
import VueRouter from 'vue-router'

Vue.use(VueRouter)

const routes = [
  {
    path: '/',
    name: 'Manage',
    component: ()=>import("../views/Manage"),
    //重定向，使得一进入 就显示Home组件的内容
    redirect:"/home",
    children:[
      {
        path: 'home',name: "Home",component:()=>import("../views/Home")
      },
      {
        path:'user',name:'User',component:()=>import("../views/User")
      }
    ]
  },
  {
    path: '/about',
    name: 'about',
    component: () => import( '../views/AboutView.vue')
  }
]

const router = new VueRouter({
  mode: 'history',
  base: process.env.BASE_URL,
  routes
})
//路由守卫
router.beforeEach((to,from,next)=>{
  localStorage.setItem("currentPathName",to.name)//设置当前的路由名称，为了在Header组件中去使用
  store.commit("setPath")//触发store的数据更新
  next()//放行路由
})

export default router

```

![image-20230730205249686](D:\SpringBoot+Vue\assets\image-20230730205249686.png)

#### 6.4 store/index.js

```js
import Vue from 'vue'
import  Vuex from 'vuex'

Vue.use(Vuex)
const store=new Vuex.Store({
    state:{
        currentPathName:''
    },
    mutations:{
        setPath(state){
            state.currentPathName=localStorage.getItem("currentPathName")
        }
    }
})

export default store

```

#### 6.5 Header.vue

```js
    <div style="flex: 1;font-size: 18px">
      <!--            给span动态绑定一个“collapseBtnClass”类，收缩框
                      并添加一个点击事件
      -->
      <span :class="collapseBtnClass" style="cursor: pointer" @click="collapse"></span>
      <!--          顶部面包屑区域-->
      <el-breadcrumb separator="/" style="display: inline-block;margin-left: 10px">
        <el-breadcrumb-item :to="{ path: '/' }">首页</el-breadcrumb-item>
        <el-breadcrumb-item>{{ currentPathName }}</el-breadcrumb-item>
      </el-breadcrumb>
    </div>
    
    
  computed:{
    currentPathName(){
      return this.$store.state.currentPathName;//需要监听的数据
    }
  },
  watch:{
    currentPathName(newVal,oldVal){
      console.log(newVal)
    }
  }
```

![image-20230730215743063](D:\SpringBoot+Vue\assets\image-20230730215743063.png)

![image-20230730215800371](D:\SpringBoot+Vue\assets\image-20230730215800371.png)

![image-20230730215836218](D:\SpringBoot+Vue\assets\image-20230730215836218.png)

![image-20230730215926801](D:\SpringBoot+Vue\assets\image-20230730215926801.png)

# 十、SpringBoot和Vue的导入和导出

### 1.SpringBoot











